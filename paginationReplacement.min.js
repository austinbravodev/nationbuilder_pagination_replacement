/*! @license paginationReplacement | (c) Austin Bravo | Released under this license: _____ | This notice must be included in all copies or substantial portions of this source code. */
function paginationReplacement(D){if(!DOMParser)return void console.info("`paginationReplacement` is not supported.");let{itemsContainerSelector:z,paginationContainerSelector:A,paginationContainerHide:e="none",previousPageCondition:n,nextPageCondition:B,sanitize:j=window.DOMPurify?.sanitize}=D;if("function"!=typeof j)console.warn("`paginationReplacement` is not enabled due to missing HTML sanitization function.");else{let R=document.querySelector(z),O=document.querySelector(A);if(n(O)){let I=PerformanceObserver.supportedEntryTypes.includes("navigation");var t,o;I?null!==history.state&&((t=history.state.prState)?(o=performance.getEntriesByType("navigation")).some(e=>"back_forward"===e.type)?(R.innerHTML=j(t.itemsContContents),O.innerHTML=j(t.pagContContents)):o.some(e=>"reload"===e.type)&&history.replaceState(null,""):(I=!1,console.warn("`paginationReplacement` is supported, but back and forward navigation will not function as intended due to `history.state` already being in use."))):console.warn("`paginationReplacement` is supported, but back and forward navigation will not function as intended.");let P=!0;if(!B(O)){let{paginationContainerShow:e="",nextPageUrl:n,makeButton:t,buttonSelector:o,buttonContainerSelector:i,buttonLoaded:r=e=>{e.disabled=!1},buttonLoading:a=e=>{e.disabled=!0},buttonContainerShow:s="",buttonContainerHide:l="none",makeMessages:c,messagesSelector:u,messagesContainerSelector:d,messagesContainerShow:g="",messagesContainerHide:p="none",loadingMessage:f="Loading...",messagesLoadingIconSelector:m,messagesLoadingIconShow:y="",messagesLoadingIconHide:b="none",errorMessage:S="An error occurred - please use pagination.",loadAll:C=!1}=D,h=!1,w=!1,v,L,M,H=O;if(t?{btn:L,btnCont:M=L,appendElement:H=H}=t(H):(L=document.querySelector(o),M=document.querySelector(i)||L,H=M??H),!L&&!C){if(!IntersectionObserver)return void console.info("`paginationReplacement` infinite scroll is unavailable.");h=!0}function F(){return fetch(n(O)).then(e=>{if(e.ok)return e.text();throw new Error("Error fetching next page: "+e.status)})}let T=F(),q,k,x,E=(c?{msgs:q,msgsCont:k=q,msgsLoadIcon:x}=c(H):(q=document.querySelector(u),k=document.querySelector(d)||q,x=document.querySelector(m)),new DOMParser);function U(){if(w){if(!C)return}else L&&_(L,a),w=!0,q&&(q.textContent=f,x&&_(x,y),h||_(k,g));let n="";T.then(e=>{var e=E.parseFromString(e,"text/html"),n=j(e.querySelector(A).innerHTML);R.insertAdjacentHTML("beforeend",j(e.querySelector(z).innerHTML)),O.innerHTML=n,I&&history.replaceState({prState:{itemsContContents:R.innerHTML,pagContContents:n}},"")}).catch(e=>{n=S,console.error(e.message)}).finally(()=>{if(n||B(O))L&&_(M,l),h&&v.unobserve(k),n&&_(O,e);else{if(T=F(),C)return void U();L&&_(L,r)}q&&(x&&_(x,b),n||h||_(k,p),q.textContent=n),w=!1})}h?(v=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&U()})})).observe(k):L?(L.addEventListener("click",U),_(L,r),_(M,s)):C?U():P=!1}function _(e,n){"string"==typeof n?e.style.display=n:"function"==typeof n?n(e):console.error("Display options must be string or function.")}P&&_(O,e)}else console.info("`paginationReplacement` is only enabled on the first page.")}}